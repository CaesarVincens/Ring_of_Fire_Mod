USA_congress = {
	test = {
		icon = GFX_decision_generic_nationalism
		complete_effect = {
			USA_recalc_congress_icon_frames = yes
		}
	}
}

NUS_major_decisions = {

	NUS_ottoman_overtures = {
		fire_only_once = yes
		visible = {
			NOT = { has_country_flag = NUS_ottoman_overtures_flag }
			OR = {
				has_completed_focus = NUS_constitutional_convention
				has_completed_focus = NUS_martial_law
				date > 1632.3.1
			}
		}
		available = {
			NOT = { has_war_with = TUR }
		}
		targets = { TUR }
		target_trigger = {
			FROM = {
				tag = TUR
			}
		}
		highlight_states = {
			highlight_states_trigger = {
				FROM = {
					capital_scope = {
						is_capital = yes
					}
				}
			}
		}
		complete_effect = {
			set_country_flag = NUS_ottoman_overtures_flag
			custom_effect_tooltip = NUS_ottoman_overtures.tt
			#hidden_effect = {
				TUR = {
					country_event = {
						id = RoF_TUR.110
						days = 30
					}
				}
			#}
		}
		cost = 15
		ai_will_do = {
			base = 10
		}		
	}
	NUS_protect_Jena_mission = {
		icon = generic_prepare_civil_war 
		
		fire_only_once = yes
		available = {
			num_divisions > 2
		}
		
		activation = {
			has_global_flag = breitenfeld_happened
		}
		is_good = no
		days_mission_timeout = 30
		selectable_mission = yes
		timeout_effect = {
			add_political_power = -40
			hidden_effect = {
				news_event = { id = RoF_NUS.113 }
			}
		}
		cost = 20
		complete_effect = {
			country_event = { id = RoF_NUS.112 }
			add_political_power = 20
		}
		ai_will_do = {
			base = 100
		}
	}
	NUS_protect_Jena_decision = {
		fire_only_once = yes
		visible = {
			always = no
			has_active_mission = NUS_protect_Jena_mission
		}
		available = {
			has_active_mission = NUS_protect_Jena_mission
			num_divisions > 2
		}
		complete_effect = {
			#set_country_flag = NUS_start_CoC
			country_event = { id = RoF_NUS.112 }
		}
		cost = 20
		ai_will_do = {
			base = 100
		}		
	}
	NUS_send_embassy_FRA = {
		fire_only_once = yes
		visible = {
			NOT = { has_country_flag = NUS_embassy_FRA }
			OR = {
				has_completed_focus = NUS_rifle_meeting
				FRA = { has_completed_focus = FRA_ostend_league_focus }
				date > 1633.7.1
			}
		}
		available = {
			NOT = { has_war_with = FRA }
		}
		targets = { FRA }
		target_trigger = {
			FROM = {
				tag = FRA
			}
		}
		highlight_states = {
			highlight_states_trigger = {
				FROM = {
					capital_scope = {
						is_capital = yes
					}
				}
			}
		}
		complete_effect = {
			set_country_flag = NUS_embassy_FRA
			custom_effect_tooltip = NUS_embassy_FRA.tt
		}
		cost = 15
		ai_will_do = {
			base = 10
		}		
	}
	NUS_send_embassy_ENG = {
		fire_only_once = yes
		visible = {
			NOT = { has_country_flag = NUS_embassy_ENG }
			OR = {
				has_completed_focus = NUS_rifle_meeting
				FRA = { has_completed_focus = FRA_ostend_league_focus }
				date > 1633.7.1
			}
		}
		targets = { ENG }
		target_trigger = {
			FROM = {
				tag = ENG
			}
		}
		highlight_states = {
			highlight_states_trigger = {
				FROM = {
					capital_scope = {
						is_capital = yes
					}
				}
			}
		}
		available = {
			NOT = { has_war_with = ENG }
		}
		complete_effect = {
			set_country_flag = NUS_embassy_ENG
			custom_effect_tooltip = NUS_embassy_ENG.tt
		}
		cost = 15
		ai_will_do = {
			base = 10
		}		
	}
	NUS_break_out_embassy_ENG = {
		fire_only_once = yes
		allowed = { always = no }
		available = {
			NOT = { has_country_flag = NUS_embassy_break_out }
			OR = {
				has_completed_focus = NUS_force_hamburg
				ENG = { has_completed_focus = ENG_move_to_oxford }
				date > 1634.4.1
			}
		}
		highlight_states = {
			highlight_state_targets = {
				state = 128
			}
		}
		complete_effect = {
			set_country_flag = NUS_embassy_break_out
			custom_effect_tooltip = NUS_embassy_break_out.tt
		}
		cost = 25
		ai_will_do = {
			base = 10
		}		
	}
	NUS_send_embassy_VEN = {
		fire_only_once = yes
		visible = {
			NOT = { has_country_flag = NUS_embassy_VEN }
			OR = {
				has_completed_focus = NUS_rifle_meeting
				FRA = { has_completed_focus = FRA_ostend_league_focus }
				date > 1633.11.1
			}
		}
		targets = { VEN }
		target_trigger = {
			FROM = {
				tag = VEN
			}
		}
		highlight_states = {
			highlight_states_trigger = {
				FROM = {
					capital_scope = {
						is_capital = yes
					}
				}
			}
		}
		available = {
			NOT = { has_war_with = VEN }
		}
		complete_effect = {
			set_country_flag = NUS_embassy_VEN
			custom_effect_tooltip = NUS_embassy_VEN.tt
		}
		cost = 15
		ai_will_do = {
			base = 10
		}		
	}
	NUS_send_embassy_MUG = {
		fire_only_once = yes
		visible = {
			always = no
			OR = {
				has_completed_focus = NUS_rifle_meeting
				FRA = { has_completed_focus = FRA_ostend_league_focus }
				date > 1634.3.1
			}
		}
		targets = { MUG }
		target_trigger = {
			FROM = {
				tag = MUG
			}
		}
		highlight_states = {
			highlight_states_trigger = {
				FROM = {
					capital_scope = {
						is_capital = yes
					}
				}
			}
		}
		available = {
			NOT = { has_war_with = MUG }
		}
		complete_effect = {
			set_country_flag = NUS_embassy_MUG
			custom_effect_tooltip = NUS_embassy_MUG.tt
		}
		cost = 25
		ai_will_do = {
			base = 10
		}		
	}
	NUS_negotiate_for_Harlingen = {
		fire_only_once = yes
		visible = {
			has_global_flag = congress_of_copenhagen_begins
		}
		state_target = yes
		targets = { 657 }
		target_trigger = {
			FROM = {
				OR = {
					is_owned_by = UPS
					is_owned_by = SPN
				}
			}
		}
		highlight_states = {
			highlight_state_targets = {
				state = 657
			}
		}
		on_map_mode = map_and_decisions_view
		available = {
			657 = {
				OWNER = {
					NOT = { has_war_with = NUS }
				}
			}
		}
		complete_effect = {
			FROM = {
				OWNER = {
					country_event = { id = RoF_USE.206 }
				}
			}
			#transfer_state = 657
		}
		cost = 50
		ai_will_do = {
			base = 50
		}
	}

	USE_move_capital_to_magdeburg = {
		visible = {
			has_cosmetic_tag = USE
			NOT = {
				capital_scope = {
					state = 247
				}
			}
		}
		available = {
			owns_state = 247
		}
		complete_effect = {
			set_capital = { state = 247 }
			if = {
				limit = {
					NOT = { 247 = { is_core_of = NUS } }
				}
				add_state_core = 247
			}
		}
		cost = 10
		ai_will_do = {
			base = 1000
		}
	}
	
}

NUS_advanced_projects_decisions = {
	NUS_manufacture_up_time_firearms = {
		icon = GFX_decision_generic_assassination
		visible = {
			always = yes # should always be visible to NUS original tag; already set up by category allowance
		}
		available = { # check if at least 10 factories & at least 5 up-time resources
			num_of_civilian_factories > 10
			check_variable = {
				var = NUS_up_time_resources_count
				value = 5
				compare = greater_than_or_equals
			}
		}
		days_re_enable = 30 # can manufacture again a month after completion
		complete_effect = {
			custom_effect_tooltip = NUS_minus_5_up_time_resources_tt # lose 5 up-time resources
			hidden_effect = {
				subtract_from_variable = {
					var = NUS_up_time_resources_count
					value = 5
				}
			}
			add_timed_idea = { # add timed idea: 5% consumer goods use for 90 days
				idea = NUS_firearms_project_consumer_goods
				days = 90
			}
		}
		days_remove = 90 # takes 90 days for the project to finish
		remove_effect = { 
			add_equipment_to_stockpile = { # add 500 up-time rifles
				type = up_time_weapons
				amount = 500
				producer = NUS
			}
			add_tech_bonus = { # one-time 50% research bonus to infantry weapons
				bonus = 0.5
				uses = 1
				category = infantry_weapons
			}
		}
	}
	NUS_retrofit_civilian_automobiles = {
		icon = GFX_decision_generic_tank
		visible = {
			always = yes # should always be visible to NUS original tag; already set up by category allowance
		}
		available = { # check if at least 50 factories & at least 5 up-time resources
			num_of_civilian_factories > 50
			check_variable = {
				var = NUS_up_time_resources_count
				value = 5
				compare = greater_than_or_equals
			}
		}
		days_re_enable = 30 # can retrofit again a month after completion
		complete_effect = {
			custom_effect_tooltip = NUS_minus_5_up_time_resources_tt # lose 5 up-time resources
			hidden_effect = {
				subtract_from_variable = {
					var = NUS_up_time_resources_count
					value = 5
				}
			}
			add_timed_idea = { # add timed idea: 5% consumer goods use for 360 days
				idea = NUS_automobiles_project_consumer_goods
				days = 360
			}
		}
		days_remove = 360 # takes a year for the project to finish
		remove_effect = {
			add_equipment_to_stockpile = { # add 100 APCs
				type = motorized_equipment
				amount = 100
				producer = NUS
			}
			add_tech_bonus = { # one-time 50% research bonus to APC tech, may want to switch to a different category like steam tank (?)
				bonus = 0.5
				uses = 1
				category = apc_tech
			}
		}
	}
	NUS_donate_up_time_machinery_to_universities = {
		icon = GFX_decision_generic_wreckers
		visible = {
			always = yes # should always be visible to NUS original tag; already set up by category allowance
		}
		available = { # check if at least 1 up-time resources
			check_variable = {
				var = NUS_up_time_resources_count
				value = 1
				compare = greater_than_or_equals
			}
		}
		days_re_enable = 30 # can retrofit again a month after completion
		complete_effect = {
			custom_effect_tooltip = NUS_minus_1_up_time_resources_tt # lose 1 up time resources
			hidden_effect = {
				subtract_from_variable = {
					var = NUS_up_time_resources_count
					value = 1
				}
			}
			add_timed_idea = { # add timed idea: 5% research bonus for 180 days
				idea = NUS_donate_machinery_research_bonus
				days = 180
			}
		}
	}
	NUS_aqualator_computing = { # one-time only, should NOT re-enable!
		icon = GFX_decision_aqualator
		visible = {
			always = yes # should always be visible to NUS original tag; already set up by category allowance
		}
		available = { # check if at least 10 factories & at least 5 up-time resources
			num_of_civilian_factories > 10
			check_variable = {
				var = NUS_up_time_resources_count
				value = 5
				compare = greater_than_or_equals
			}
		}
		complete_effect = {
			custom_effect_tooltip = NUS_minus_5_up_time_resources_tt # lose 5 up time resources
			hidden_effect = { 
				subtract_from_variable = {
					var = NUS_up_time_resources_count
					value = 5
				}
			}
		}
		days_remove = 360
		remove_effect = {
			# add permanent idea: 5% research bonus
			add_ideas = { NUS_aqualator_computing_research_bonus }
		}
	}
}

NUS_minor_decisions = {
	NUS_grantville_national_library_access = {	# Policy on public access to the Grantville National Library. Open = research buffs but encryption debuffs. Restricted = research debuffs but encryption buffs. (Work out precise balance after playtesting!)
		icon = GFX_decision_SOV_place_hq 
		visible = {
			always = yes # should always be visible to NUS original tag; already set up by category allowance
		}
		available = {
			controls_province = 9497 # check if Grantville is actively controlled
		}
		days_re_enable = 30 # can change library access once a month (May need to rebalance to a longer wait time)
		complete_effect = {
			if = {	# swap free --> restricted
				limit = {
					has_idea = NUS_grantville_national_library_free
				}
				swap_ideas = {
					remove_idea = NUS_grantville_national_library_free
					add_idea = NUS_grantville_national_library_restricted
				}
			}
			else_if = { # swap restricted --> free
				limit = {
					has_idea = NUS_grantville_national_library_restricted
				}
				swap_ideas = {
					remove_idea = NUS_grantville_national_library_restricted
					add_idea = NUS_grantville_national_library_free
				}
			}
		}
	}
	NUS_CoC_Speech_progress = {
		icon = GFX_decision_generic_nationalism
		visible = {
			any_other_country = {
				has_country_flag = NUS_coc_inspired
			}
		}
		available = {
			hidden_trigger = {
				always = no
			}
		}
		complete_effect = {
			for_each_loop = {
				array = NUS.patriotic_fervor_array
				var:v = {
					add_political_power = i
				}
			}
			random_scope_in_array = {
				array = patriotic_fervor_array
				add_political_power = 1
			}
			add_political_power = patriotic_fervor_array^num
		}
	}
	NUS_coc_speeches = {
		fixed_random_seed = no
		icon = GFX_decision_generic_nationalism
		visible = {
			any_other_country = {
				is_german_tag = yes
				has_country_flag = CoC_present
			}
			has_completed_focus = NUS_establish_committees_of_correspondence
			NOT = { has_completed_focus = NUS_patriotic_fervor }
		}
		target_root_trigger = {
			has_completed_focus = NUS_expand_committees
		}
		target_array = global.german_tags
		target_trigger = {
			FROM = {
				has_country_flag = CoC_present
				NOT = { has_country_flag = NUS_coc_inspired }
				is_german_tag = yes
			}
		}
		highlight_states = {
			highlight_states_trigger = {
				owner = {
					is_german_tag = yes
					#has_variable = CoC_strength
					has_country_flag = CoC_present
				}
				is_capital = yes
				is_controlled_by = FROM
			}
		}
		days_re_enable = 60
		complete_effect = {
			random_list = {
				67 = {
					add_to_variable = {
						var = NUS_patriotic_fervor
						value = 1
					}
					add_to_array = {
						array = NUS.patriotic_fervor_array
						value = FROM
					}
					FROM = {
						set_country_flag = NUS_coc_inspired
					}
					#custom_effect_tooltip = NUS_coc_speeches_success_TT
					news_event = {
						id = RoF_NUS.140
					}
				}
				33 = {
					#custom_effect_tooltip = NUS_coc_speeches_faliure_TT
					news_event = {
						id = RoF_NUS.141
					}
				}
			}
		}
		cost = 50
		ai_will_do = {
			base = 0
			modifier = {
				add = 10
				OR = {
					has_game_rule = {
						rule = NUS_ai_behavior
						option = RADICAL
					}
					has_country_flag = NUS_AI_RANDOM_RADICAL
				}
			}
		}
	}
}