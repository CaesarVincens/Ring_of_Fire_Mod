add_namespace = RoF_AUS

country_event = {
	id = RoF_AUS.100
	title = RoF_AUS.100.t
	picture = GFX_report_event_boh_flag
	desc = RoF_AUS.100.d
	fire_only_once = yes

	is_triggered_only = yes
	
	immediate = {
		hidden_effect = {
			if = {
				limit = {
					NOT = { 37 = { is_core_of = BOH } }
				}
				37 = { add_core_of = BOH }
			}
			if = {
				limit = {
					NOT = { 38 = { is_core_of = BOH } }
				}
				38 = { add_core_of = BOH }
			}
			if = {
				limit = {
					NOT = { 573 = { is_core_of = BOH } }
				}
				573 = { add_core_of = BOH }
			}
			AUS = {
				release = BOH
				add_state_claim = 37
				add_state_claim = 38
				add_state_claim = 573
				add_state_claim = 429
				add_state_claim = 428
				add_opinion_modifier = { target = BOH modifier = hates_BOH }
				every_army_leader = {
					limit = {
						OR = {
							has_id = 1001
							has_id = 1002
						}
					}
					set_nationality = BOH
				}
			}
			BOH = {
				add_named_threat = { threat = 5 name = BOH.1.t }
				inherit_technology = ROOT
				#RoF_transfer_technology = yes
				create_country_leader = {
					name = "Albrecht von Wallenstein"
					desc = "POLITICS_WALLENSTEIN_DESC"
					picture = "GFX_leader_BOH_Wallenstein"
					ideology = constitutional_monarchy
					traits = {
					}
				}
				create_country_leader = {
					name = "Albrecht von Wallenstein"
					desc = "POLITICS_WALLENSTEIN_DESC"
					picture = "GFX_leader_BOH_Wallenstein"
					ideology = absolute_monarchy
					traits = {
					}
				}
				create_country_leader = {
					name = "Albrecht von Wallenstein"
					desc = "POLITICS_WALLENSTEIN_DESC"
					picture = "GFX_leader_BOH_Wallenstein"
					ideology = absolute_monarchy_neutral
					traits = {
					}
				}
				set_politics = {
					ruling_party = constitutionalist
					elections_allowed = no
				}
				add_opinion_modifier = { target = AUS modifier = hates_AUS }
				transfer_state = 429
				load_oob = "BOH_OOB"
			}
			POL = { transfer_state = 428 }
		}
	}
	option = {
		name = RoF_AUS.100.a
		effect_tooltip = {
			release = BOH
			BOH = {
				add_named_threat = { threat = 5 name = BOH.1.t }
				create_country_leader = {
					name = "Albrecht von Wallenstein"
					desc = "POLITICS_WALLENSTEIN_DESC"
					picture = "GFX_leader_BOH_Wallenstein"
					ideology = constitutional_monarchy
					traits = {
					}
				}
				set_politics = {
					ruling_party = constitutionalist
					elections_allowed = no
				}
			}
			POL = { transfer_state = 428 }
		}
	}
	option = {
		name = RoF_AUS.100.b
		trigger = {
			is_ai = no
		}
		BOH = { change_tag_from = ROOT }
		effect_tooltip = {
			release = BOH
			BOH = {
				add_named_threat = { threat = 5 name = BOH.1.t }
				create_country_leader = {
					name = "Albrecht von Wallenstein"
					desc = "POLITICS_WALLENSTEIN_DESC"
					picture = "GFX_leader_BOH_Wallenstein"
					ideology = constitutional_monarchy
					traits = {
					}
				}
				set_politics = {
					ruling_party = constitutionalist
					elections_allowed = no
				}
			}
			POL = { transfer_state = 428 }
		}
	}
}

#Wallenstein declares Bohemian independence
country_event = {
	id = RoF_AUS.101
	title = RoF_AUS.101.t
	picture = GFX_report_event_boh_flag
	desc = RoF_AUS.101.d
	fire_only_once = yes

	trigger = {
		tag = AUS
		date > 1633.7.1
		has_global_flag = wallenstein_gambit
		BOH = { exists = no }
	}
	
	mean_time_to_happen = {
		days = 5
	}
	
	immediate = {
	}
	option = {
		name = RoF_AUS.101.a
		effect_tooltip = {
			country_event = { id = RoF_AUS.102 hours = 12 }
		}
		hidden_effect = {
			random_list = {
				75 = { country_event = { id = RoF_AUS.102 hours = 12 } }
				25 = { country_event = { id = RoF_AUS.103 hours = 12 } }
			}
		}
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0
				is_in_faction_with = BOH
			}
		}
	}
	
	option = {
		name = RoF_AUS.101.b
		country_event = { id = RoF_AUS.100 hours = 12 }
		ai_chance = {
			factor = 10
		}
	}
}

#Bohemia wins White Mountain 2
country_event = {
	id = RoF_AUS.102
	title = RoF_AUS.102.t
	picture = GFX_report_event_boh_flag
	desc = RoF_AUS.102.d
	fire_only_once = yes

	is_triggered_only = yes
	immediate = {
		hidden_effect = {
			news_event = { id = RoF_news.02 days = 1 }
		}
	}
	
	option = {
		name = RoF_AUS.102.a
		country_event = { id = RoF_AUS.100 hours = 12 }
		ai_chance = {
			factor = 10
		}
	}
}

#Bohemia loses White Mountain 2
country_event = {
	id = RoF_AUS.103
	title = RoF_AUS.103.t
	picture = GFX_report_event_boh_flag
	desc = RoF_AUS.103.d
	fire_only_once = yes

	is_triggered_only = yes
	
	immediate = {
		hidden_effect = {
			news_event = { id = RoF_news.0201 days = 1 }
		}
	}
	
	option = {
		name = RoF_AUS.103.a
		remove_unit_leader = 1001
		remove_unit_leader = 1002
		ai_chance = {
			factor = 10
		}
	}
	
}

country_event = {
	id = RoF_AUS.104
	title = RoF_AUS.104.t
	picture = GFX_report_event_boh_flag
	desc = RoF_AUS.104.d
	fire_only_once = yes

	is_triggered_only = yes
	
	immediate = {
		hidden_effect = {
			news_event = { id = RoF_news.0201 days = 1 }
		}
	}
	
	option = {
		name = RoF_AUS.103.a
		remove_unit_leader = 1001
		remove_unit_leader = 1002
		ai_chance = {
			factor = 10
		}
	}
	
}


#FROM asks to join
country_event = {
	id = RoF_AUS.105
	title = RoF_AUS.105.t
	picture = GFX_report_event_scottish_mercenaries
	desc = RoF_AUS.105.d
	#fire_only_once = yes

	is_triggered_only = yes
	
	immediate = {
		
	}
	option = {
		name = RoF_AUS.105.a
		effect_tooltip = {
			add_to_faction = FROM
			#FROM = {
			#	add_to_war = {
			#		targeted_alliance = AUS
			#		enemy = SWE
			#		hostility_reason = asked_to_join
			#	}
			#}
		}
		FROM = {
			set_country_flag = AUS_accepted
			country_event = { id = RoF_German.102 hours = 12 }
		}
	}
	option = {
		name = RoF_AUS.105.b
		FROM = {
			set_country_flag = AUS_rejected
			country_event = { id = RoF_German.102 hours = 12 }
		}
	}
}
#Rain am Lech
country_event = {
	id = RoF_AUS.110
	title = RoF_AUS.110.t
	picture = GFX_report_event_breitenfeld
	desc = RoF_AUS.110.d
	fire_only_once = yes

	is_triggered_only = yes
	
	immediate = {
		remove_unit_leader = 1003
	}
	option = {
		name = RoF_AUS.110.a
	}
}

country_event = {
	id = RoF_AUS.111
	title = RoF_AUS.111.t
	picture = GFX_report_event_breitenfeld
	desc = RoF_AUS.111.d
	fire_only_once = yes

	is_triggered_only = yes
	
	immediate = {
		remove_unit_leader = 1001
	}
	option = {
		name = RoF_AUS.111.a
	}
}

#defense of homeland
country_event = {
	id = RoF_AUS.115
	title = RoF_AUS.115.t
	picture = GFX_report_event_aus_flag
	desc = RoF_AUS.115.d
	fire_only_once = yes

	trigger = {
		NOT = { country_exists = BOH }
		NOT = { controls_state = 37 }
	}
	
	immediate = {
		load_oob = "AUS_defend_wien"
		add_manpower = 10000
		set_country_flag = defend_wien
	}
	option = {
		name = RoF_AUS.115.a
	}
}

country_event = {
	id = RoF_AUS.150
	title = RoF_AUS.150.t
	picture = GFX_report_event_aus_flag
	desc = RoF_AUS.150.d
	fire_only_once = yes
	
	trigger = {
		tag = AUS
		date > 1634.8.1
		has_country_leader = {
			ruling_only = yes
			name = "Ferdinand II von Habsburg"
		}
	}
	mean_time_to_happen = {
		days = 20
	}
	
	immediate = {
		hidden_effect = {
			create_country_leader = {
				name = "Ferdinand III von Habsburg"
				desc = "POLITICS_FERDINAND_III_DESC"
				picture = "GFX_leader_AUS_Ferdinand_III"
				ideology = absolute_monarchy
				traits = {
				}
			}
		}
		if = {
			limit = { has_government = absolutist }
			add_popularity = { ideology = constitutionalist popularity = 0.55 }
		}
		create_country_leader = {
			name = "Ferdinand III von Habsburg"
			desc = "POLITICS_FERDINAND_III_DESC"
			picture = "GFX_leader_AUS_Ferdinand_III"
			ideology = constitutional_monarchy
			traits = {
			}
		}
		set_politics = {
			ruling_party = constitutionalist
			elections_allowed = no
		}
		remove_ideas = hre_emperor
	}
	option = {
		name = RoF_AUS.150.a
		SWE = { white_peace = AUS }
		white_peace = SWE
		white_peace = NUS
		set_cosmetic_tag = AUH
		every_state = {
			limit = {
				is_core_of = HUN
			}
			add_core_of = AUS
			set_state_flag = hun_core
		}
		if = {
			limit = {
				is_faction_leader = yes
			}
			dismantle_faction = yes
		}
		ai_chance = {
			factor = 100
		}
	}
	option = {
		name = RoF_AUS.150.b
		set_country_flag = AUS_seek_hre_flag
		ai_chance = {
			factor = 10
		}
	}
}