add_namespace = RoF_NED

#Dunkirk SPN
country_event = {
	id = RoF_NED.100
	title = RoF_NED.100.t
	picture = GFX_report_event_rof_placeholder
	desc = RoF_NED.100.d
	fire_only_once = yes

	is_triggered_only = yes
	
	immediate = {
	}
	option = {
		name = RoF_NED.100.a
		set_country_flag = SPN_don_fernando_arrives
	}
}

#Dunkirk UPS
country_event = {
	id = RoF_NED.101
	title = RoF_NED.101.t
	picture = GFX_report_event_rof_placeholder
	desc = RoF_NED.101.d
	fire_only_once = yes

	is_triggered_only = yes
	
	immediate = {
	}
	option = {
		name = RoF_NED.101.a
	}
}

#Don Fernando takes control of SPN
country_event = {
	id = RoF_NED.102
	title = RoF_NED.102.t
	picture = GFX_report_event_rof_placeholder
	desc = RoF_NED.102.d
	fire_only_once = yes

	trigger = {
		tag = SPN
		has_country_flag = SPN_don_fernando_arrives
	}
	
	mean_time_to_happen = {
		days = 30
	}
	
	immediate = {
		hidden_effect = {
			create_country_leader = {
				name = "Fernando von Habsburg"
				desc = "POLITICS_DON_FERNANDO_DESC"
				picture = "GFX_leader_SPN_Don_Fernando"
				ideology = absolute_monarchy
				traits = {
				}
			}
			create_country_leader = {
				name = "Fernando von Habsburg"
				desc = "POLITICS_DON_FERNANDO_DESC"
				picture = "GFX_leader_SPN_Don_Fernando"
				ideology = constitutional_monarchy
				traits = {
				}
			}
			create_corps_commander = {
				name = "Fernando von Habsburg"
				gfx = "GFX_leader_SPN_Don_Fernando"
				traits = {}
				skill = 3
			}
		}
	}
	
	#join
	option = {
		name = RoF_NED.102.a
		if = {
			limit = { NOT = { has_government = absolutist } }
			add_popularity = { ideology = absolutist popularity = 0.4 }
			set_politics = { ruling_party = absolutist }
		}
	}
	#don't join
	option = {
		name = RoF_NED.102.b
		if = {
			limit = { NOT = { has_government = constitutionalist } }
			add_popularity = { ideology = constitutionalist popularity = 0.4 }
			set_politics = { ruling_party = constitutionalist }
		}
	}
}

#UPS capitulates
country_event = {
	id = RoF_NED.110
	title = RoF_NED.110.t
	picture = GFX_report_event_rof_placeholder
	desc = RoF_NED.110.d

	is_triggered_only = yes
	
	immediate = {

	}
	option = {
		name = RoF_NED.110.a
		ai_chance = { factor = 100 }
		every_state = {
			limit = { has_state_flag = UPS_original_state }
			UPS = { transfer_state = PREV }
		}
		puppet = UPS
		white_peace = UPS
	}
	option = {
		name = RoF_NED.110.b
		ai_chance = { factor = 0 }
		set_country_flag = take_UPS
		add_political_power = -150
	}
}

#UPS annexed
country_event = {
	id = RoF_NED.111
	title = RoF_NED.111.t
	picture = GFX_report_event_rof_placeholder
	desc = RoF_NED.111.d

	is_triggered_only = yes
	
	immediate = {

	}
	option = {
		name = RoF_NED.110.a
		ai_chance = { factor = 100 }
		every_state = {
			limit = { has_state_flag = UPS_original_state }
			UPS = { transfer_state = PREV }
		}
		puppet = UPS
	}
	option = {
		name = RoF_NED.110.b
		ai_chance = { factor = 0 }
		set_country_flag = take_UPS
		add_political_power = -150
	}
}
